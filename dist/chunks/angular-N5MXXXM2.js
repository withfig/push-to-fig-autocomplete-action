import{a as n,c as ne,h as vt}from"./chunk-BSCOAZCE.js";function le(t){return t>=9&&t<=32||t==160}function T(t){return 48<=t&&t<=57}function ce(t){return t>=97&&t<=122||t>=65&&t<=90}function wt(t){return t===39||t===34||t===96}function St(t,e,s){return new A(t,e,u.Character,s,String.fromCharCode(s))}function de(t,e,s){return new A(t,e,u.Identifier,0,s)}function fe(t,e,s){return new A(t,e,u.PrivateIdentifier,0,s)}function xe(t,e,s){return new A(t,e,u.Keyword,0,s)}function Y(t,e,s){return new A(t,e,u.Operator,0,s)}function ve(t,e,s){return new A(t,e,u.String,0,s)}function ye(t,e,s){return new A(t,e,u.Number,s,"")}function ge(t,e,s){return new A(t,e,u.Error,0,s)}function Ct(t){return 97<=t&&t<=122||65<=t&&t<=90||t==95||t==36}function kt(t){return ce(t)||T(t)||t==95||t==36}function we(t){return t==101||t==69}function Se(t){return t==45||t==43}function Ce(t){switch(t){case 110:return 10;case 102:return 12;case 114:return 13;case 116:return 9;case 118:return 11;default:return t}}function ke(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function Oe(t,e){if(e!=null&&!(Array.isArray(e)&&e.length==2))throw new Error(`Expected '${t}' to be an array, [start, end].`);if(e!=null){let s=e[0],i=e[1];Pe.forEach(r=>{if(r.test(s)||r.test(i))throw new Error(`['${s}', '${i}'] contains unusable interpolation symbol.`)})}}function Ne(t){let e=new Map,s=0,i=0,r=0;for(;r<t.length;){let a=t[r];if(a.type===9){let[h,c]=a.parts;s+=c.length,i+=h.length}else{let h=a.parts.reduce((c,p)=>c+p.length,0);i+=h,s+=h}e.set(i,s),r++}return e}function Pt({start:t,end:e},s){let i=t,r=e;for(;r!==i&&/\s/.test(s[r-1]);)r--;for(;i!==r&&/\s/.test(s[i]);)i++;return{start:i,end:r}}function Ke({start:t,end:e},s){let i=t,r=e;for(;r!==s.length&&/\s/.test(s[r]);)r++;for(;i!==0&&/\s/.test(s[i-1]);)i--;return{start:i,end:r}}function Te(t,e){return e[t.start-1]==="("&&e[t.end]===")"?{start:t.start-1,end:t.end+1}:t}function Le(t,e,s){let i=0,r={start:t.start,end:t.end};for(;;){let a=Ke(r,e),h=Te(a,e);if(a.start===h.start&&a.end===h.end)break;r.start=h.start,r.end=h.end,i++}return{hasParens:(s?i-1:i)!==0,outerSpan:Pt(s?{start:r.start+1,end:r.end-1}:r,e),innerSpan:Pt(t,e)}}function Yt(t){return typeof t=="string"?e=>e===t:e=>t.test(e)}function _e(t,e,s){let i=Yt(e);for(let r=s;r>=0;r--){let a=t[r];if(i(a))return r}throw new Error(`Cannot find front char ${e} from index ${s} in ${JSON.stringify(t)}`)}function $e(t,e,s){let i=Yt(e);for(let r=s;r<t.length;r++){let a=t[r];if(i(a))return r}throw new Error(`Cannot find character ${e} from index ${s} in ${JSON.stringify(t)}`)}function Me(t){return t.slice(0,1).toLowerCase()+t.slice(1)}function ct(t){let{start:e,end:s}=t;return{start:e,end:s,range:[e,s]}}function We(t,e){let s=e?Be(t):null;if(s===null)return{text:t,comments:[]};let i={type:"CommentLine",value:t.slice(s+2),...ct({start:s,end:t.length})};return{text:t.slice(0,s),comments:[i]}}function j(t,e=!0){return s=>{let i=new ue,r=new Qt(i),{text:a,comments:h}=We(s,e),c=t(a,r);if(c.errors.length!==0){let[{message:p}]=c.errors;throw new SyntaxError(p.replace(/^Parser Error: | at column \d+ in [^]*$/g,""))}return{result:c,comments:h,text:a}}}function dt(t){var e;return!!((e=t.extra)!=null&&e.parenthesized)}function C(t){return dt(t)?t.extra.parenStart:t.start}function k(t){return dt(t)?t.extra.parenEnd:t.end}function Ot(t){return(t.type==="OptionalCallExpression"||t.type==="OptionalMemberExpression")&&!dt(t)}function Et(t,e){let{start:s,end:i}=t.sourceSpan;return s>=i||/^\s+$/.test(e.slice(s,i))}function ze(t,e){return new Xt(t,e).node}function It(t){return t instanceof Ht}function bt(t){return t instanceof lt}function He(t,e){return new De(t,e).expressions}function ft({result:{ast:t},text:e,comments:s}){return Object.assign(ze(t,e),{comments:s})}function Je({result:{templateBindings:t},text:e}){return He(t,e)}function ie(t){var e,s,i;let r=((e=t.range)==null?void 0:e[0])??t.start,a=(i=((s=t.declaration)==null?void 0:s.decorators)??t.decorators)==null?void 0:i[0];return a?Math.min(ie(a),r):r}function Xe(t){var e;return((e=t.range)==null?void 0:e[1])??t.end}function Q(t){return{astFormat:"estree",parse(e){let s=t(e);return{type:"NGRoot",node:t===se&&s.type!=="NGChainedExpression"?{...s,type:"NGChainedExpression",expressions:[s]}:s}},locStart:ie,locEnd:Xe}}var ae,Tt,Lt,ut,b,W,D,o,_t,$t,st,F,m,J,O,H,he,Mt,Bt,it,Wt,rt,Ut,nt,Rt,Gt,E,Vt,Ft,jt,I,at,qt,zt,Dt,ot,L,_,lt,Ht,oe,yt,gt,mt,u,pe,ue,A,Z,me,Pe,Ee,$,Ie,be,Qt,M,U,Ae,Be,Ue,ns,Re,Ge,Ve,Fe,Zt,je,qe,z,G,l,d,R,v,pt,Xt,V,B,x,At,S,X,tt,et,te,Nt,ee,Kt,De,Qe,Ye,se,Ze,ts,es,ss,is,as,rs=ne(()=>{vt();ae=Object.defineProperty,Tt=n(t=>{throw TypeError(t)},"ae"),Lt=n((t,e)=>{for(var s in e)ae(t,s,{get:e[s],enumerable:!0})},"oe"),ut=n((t,e,s)=>e.has(t)||Tt("Cannot "+s),"Ut"),b=n((t,e,s)=>(ut(t,e,"read from private field"),s?s.call(t):e.get(t)),"O"),W=n((t,e,s)=>e.has(t)?Tt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),"P"),D=n((t,e,s,i)=>(ut(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s),"Y"),o=n((t,e,s)=>(ut(t,e,"access private method"),s),"c"),_t={};Lt(_t,{parsers:n(()=>$t,"parsers")});$t={};Lt($t,{__ng_action:n(()=>ts,"__ng_action"),__ng_binding:n(()=>es,"__ng_binding"),__ng_directive:n(()=>is,"__ng_directive"),__ng_interpolation:n(()=>ss,"__ng_interpolation")});st=class{static{n(this,"Z")}constructor(t,e,s,i){this.input=e,this.errLocation=s,this.ctxLocation=i,this.message=`Parser Error: ${t} ${s} [${e}] in ${i}`}},F=class{static{n(this,"b")}constructor(t,e){this.start=t,this.end=e}toAbsolute(t){return new L(t+this.start,t+this.end)}},m=class{static{n(this,"m")}constructor(t,e){this.span=t,this.sourceSpan=e}toString(){return"AST"}},J=class extends m{static{n(this,"J")}constructor(t,e,s){super(t,e),this.nameSpan=s}},O=class extends m{static{n(this,"$")}visit(t,e=null){}},H=class extends m{static{n(this,"K")}visit(t,e=null){return t.visitImplicitReceiver(this,e)}},he=class extends H{static{n(this,"Lt")}visit(t,e=null){var s;return(s=t.visitThisReceiver)==null?void 0:s.call(t,this,e)}},Mt=class extends m{static{n(this,"X")}constructor(t,e,s){super(t,e),this.expressions=s}visit(t,e=null){return t.visitChain(this,e)}},Bt=class extends m{static{n(this,"tt")}constructor(t,e,s,i,r){super(t,e),this.condition=s,this.trueExp=i,this.falseExp=r}visit(t,e=null){return t.visitConditional(this,e)}},it=class extends J{static{n(this,"M")}constructor(t,e,s,i,r){super(t,e,s),this.receiver=i,this.name=r}visit(t,e=null){return t.visitPropertyRead(this,e)}},Wt=class extends J{static{n(this,"et")}constructor(t,e,s,i,r,a){super(t,e,s),this.receiver=i,this.name=r,this.value=a}visit(t,e=null){return t.visitPropertyWrite(this,e)}},rt=class extends J{static{n(this,"_")}constructor(t,e,s,i,r){super(t,e,s),this.receiver=i,this.name=r}visit(t,e=null){return t.visitSafePropertyRead(this,e)}},Ut=class extends m{static{n(this,"st")}constructor(t,e,s,i){super(t,e),this.receiver=s,this.key=i}visit(t,e=null){return t.visitKeyedRead(this,e)}},nt=class extends m{static{n(this,"U")}constructor(t,e,s,i){super(t,e),this.receiver=s,this.key=i}visit(t,e=null){return t.visitSafeKeyedRead(this,e)}},Rt=class extends m{static{n(this,"rt")}constructor(t,e,s,i,r){super(t,e),this.receiver=s,this.key=i,this.value=r}visit(t,e=null){return t.visitKeyedWrite(this,e)}},Gt=class extends J{static{n(this,"it")}constructor(t,e,s,i,r,a){super(t,e,a),this.exp=s,this.name=i,this.args=r}visit(t,e=null){return t.visitPipe(this,e)}},E=class extends m{static{n(this,"E")}constructor(t,e,s){super(t,e),this.value=s}visit(t,e=null){return t.visitLiteralPrimitive(this,e)}},Vt=class extends m{static{n(this,"nt")}constructor(t,e,s){super(t,e),this.expressions=s}visit(t,e=null){return t.visitLiteralArray(this,e)}},Ft=class extends m{static{n(this,"at")}constructor(t,e,s,i){super(t,e),this.keys=s,this.values=i}visit(t,e=null){return t.visitLiteralMap(this,e)}},jt=class extends m{static{n(this,"ot")}constructor(t,e,s,i){super(t,e),this.strings=s,this.expressions=i}visit(t,e=null){return t.visitInterpolation(this,e)}},I=class extends m{static{n(this,"A")}constructor(t,e,s,i,r){super(t,e),this.operation=s,this.left=i,this.right=r}visit(t,e=null){return t.visitBinary(this,e)}},at=class ht extends I{static{n(this,"r")}static createMinus(e,s,i){return new ht(e,s,"-",i,"-",new E(e,s,0),i)}static createPlus(e,s,i){return new ht(e,s,"+",i,"-",i,new E(e,s,0))}constructor(e,s,i,r,a,h,c){super(e,s,a,h,c),this.operator=i,this.expr=r,this.left=null,this.right=null,this.operation=null}visit(e,s=null){return e.visitUnary!==void 0?e.visitUnary(this,s):e.visitBinary(this,s)}},qt=class extends m{static{n(this,"ct")}constructor(t,e,s){super(t,e),this.expression=s}visit(t,e=null){return t.visitPrefixNot(this,e)}},zt=class extends m{static{n(this,"ht")}constructor(t,e,s){super(t,e),this.expression=s}visit(t,e=null){return t.visitNonNullAssert(this,e)}},Dt=class extends m{static{n(this,"pt")}constructor(t,e,s,i,r){super(t,e),this.receiver=s,this.args=i,this.argumentSpan=r}visit(t,e=null){return t.visitCall(this,e)}},ot=class extends m{static{n(this,"D")}constructor(t,e,s,i,r){super(t,e),this.receiver=s,this.args=i,this.argumentSpan=r}visit(t,e=null){return t.visitSafeCall(this,e)}},L=class{static{n(this,"L")}constructor(t,e){this.start=t,this.end=e}},_=class extends m{static{n(this,"R")}constructor(t,e,s,i,r){super(new F(0,e===null?0:e.length),new L(i,e===null?i:i+e.length)),this.ast=t,this.source=e,this.location=s,this.errors=r}visit(t,e=null){return t.visitASTWithSource?t.visitASTWithSource(this,e):this.ast.visit(t,e)}toString(){return`${this.source} in ${this.location}`}},lt=class{static{n(this,"W")}constructor(t,e,s){this.sourceSpan=t,this.key=e,this.value=s}},Ht=class{static{n(this,"ut")}constructor(t,e,s){this.sourceSpan=t,this.key=e,this.value=s}},oe=class{static{n(this,"Rt")}visit(t,e){t.visit(this,e)}visitUnary(t,e){this.visit(t.expr,e)}visitBinary(t,e){this.visit(t.left,e),this.visit(t.right,e)}visitChain(t,e){this.visitAll(t.expressions,e)}visitConditional(t,e){this.visit(t.condition,e),this.visit(t.trueExp,e),this.visit(t.falseExp,e)}visitPipe(t,e){this.visit(t.exp,e),this.visitAll(t.args,e)}visitImplicitReceiver(t,e){}visitThisReceiver(t,e){}visitInterpolation(t,e){this.visitAll(t.expressions,e)}visitKeyedRead(t,e){this.visit(t.receiver,e),this.visit(t.key,e)}visitKeyedWrite(t,e){this.visit(t.receiver,e),this.visit(t.key,e),this.visit(t.value,e)}visitLiteralArray(t,e){this.visitAll(t.expressions,e)}visitLiteralMap(t,e){this.visitAll(t.values,e)}visitLiteralPrimitive(t,e){}visitPrefixNot(t,e){this.visit(t.expression,e)}visitNonNullAssert(t,e){this.visit(t.expression,e)}visitPropertyRead(t,e){this.visit(t.receiver,e)}visitPropertyWrite(t,e){this.visit(t.receiver,e),this.visit(t.value,e)}visitSafePropertyRead(t,e){this.visit(t.receiver,e)}visitSafeKeyedRead(t,e){this.visit(t.receiver,e),this.visit(t.key,e)}visitCall(t,e){this.visit(t.receiver,e),this.visitAll(t.args,e)}visitSafeCall(t,e){this.visit(t.receiver,e),this.visitAll(t.args,e)}visitAll(t,e){for(let s of t)this.visit(s,e)}};(function(t){t[t.DEFAULT=0]="DEFAULT",t[t.LITERAL_ATTR=1]="LITERAL_ATTR",t[t.ANIMATION=2]="ANIMATION",t[t.TWO_WAY=3]="TWO_WAY"})(yt||(yt={}));(function(t){t[t.Regular=0]="Regular",t[t.Animation=1]="Animation",t[t.TwoWay=2]="TwoWay"})(gt||(gt={}));(function(t){t[t.Property=0]="Property",t[t.Attribute=1]="Attribute",t[t.Class=2]="Class",t[t.Style=3]="Style",t[t.Animation=4]="Animation",t[t.TwoWay=5]="TwoWay"})(mt||(mt={}));n(le,"ue");n(T,"B");n(ce,"le");n(wt,"Ft");(function(t){t[t.Character=0]="Character",t[t.Identifier=1]="Identifier",t[t.PrivateIdentifier=2]="PrivateIdentifier",t[t.Keyword=3]="Keyword",t[t.String=4]="String",t[t.Operator=5]="Operator",t[t.Number=6]="Number",t[t.Error=7]="Error"})(u||(u={}));pe=["var","let","as","null","undefined","true","false","if","else","this"],ue=class{static{n(this,"yt")}tokenize(t){let e=new me(t),s=[],i=e.scanToken();for(;i!=null;)s.push(i),i=e.scanToken();return s}},A=class{static{n(this,"I")}constructor(t,e,s,i,r){this.index=t,this.end=e,this.type=s,this.numValue=i,this.strValue=r}isCharacter(t){return this.type==u.Character&&this.numValue==t}isNumber(){return this.type==u.Number}isString(){return this.type==u.String}isOperator(t){return this.type==u.Operator&&this.strValue==t}isIdentifier(){return this.type==u.Identifier}isPrivateIdentifier(){return this.type==u.PrivateIdentifier}isKeyword(){return this.type==u.Keyword}isKeywordLet(){return this.type==u.Keyword&&this.strValue=="let"}isKeywordAs(){return this.type==u.Keyword&&this.strValue=="as"}isKeywordNull(){return this.type==u.Keyword&&this.strValue=="null"}isKeywordUndefined(){return this.type==u.Keyword&&this.strValue=="undefined"}isKeywordTrue(){return this.type==u.Keyword&&this.strValue=="true"}isKeywordFalse(){return this.type==u.Keyword&&this.strValue=="false"}isKeywordThis(){return this.type==u.Keyword&&this.strValue=="this"}isError(){return this.type==u.Error}toNumber(){return this.type==u.Number?this.numValue:-1}toString(){switch(this.type){case u.Character:case u.Identifier:case u.Keyword:case u.Operator:case u.PrivateIdentifier:case u.String:case u.Error:return this.strValue;case u.Number:return this.numValue.toString();default:return null}}};n(St,"ge");n(de,"Ns");n(fe,"Ls");n(xe,"Rs");n(Y,"Wt");n(ve,"Ps");n(ye,"bs");n(ge,"Ks");Z=new A(-1,-1,u.Character,0,""),me=class{static{n(this,"Gt")}constructor(t){this.input=t,this.peek=0,this.index=-1,this.length=t.length,this.advance()}advance(){this.peek=++this.index>=this.length?0:this.input.charCodeAt(this.index)}scanToken(){let t=this.input,e=this.length,s=this.peek,i=this.index;for(;s<=32;)if(++i>=e){s=0;break}else s=t.charCodeAt(i);if(this.peek=s,this.index=i,i>=e)return null;if(Ct(s))return this.scanIdentifier();if(T(s))return this.scanNumber(i);let r=i;switch(s){case 46:return this.advance(),T(this.peek)?this.scanNumber(r):St(r,this.index,46);case 40:case 41:case 123:case 125:case 91:case 93:case 44:case 58:case 59:return this.scanCharacter(r,s);case 39:case 34:return this.scanString();case 35:return this.scanPrivateIdentifier();case 43:case 45:case 42:case 47:case 37:case 94:return this.scanOperator(r,String.fromCharCode(s));case 63:return this.scanQuestion(r);case 60:case 62:return this.scanComplexOperator(r,String.fromCharCode(s),61,"=");case 33:case 61:return this.scanComplexOperator(r,String.fromCharCode(s),61,"=",61,"=");case 38:return this.scanComplexOperator(r,"&",38,"&");case 124:return this.scanComplexOperator(r,"|",124,"|");case 160:for(;le(this.peek);)this.advance();return this.scanToken()}return this.advance(),this.error(`Unexpected character [${String.fromCharCode(s)}]`,0)}scanCharacter(t,e){return this.advance(),St(t,this.index,e)}scanOperator(t,e){return this.advance(),Y(t,this.index,e)}scanComplexOperator(t,e,s,i,r,a){this.advance();let h=e;return this.peek==s&&(this.advance(),h+=i),r!=null&&this.peek==r&&(this.advance(),h+=a),Y(t,this.index,h)}scanIdentifier(){let t=this.index;for(this.advance();kt(this.peek);)this.advance();let e=this.input.substring(t,this.index);return pe.indexOf(e)>-1?xe(t,this.index,e):de(t,this.index,e)}scanPrivateIdentifier(){let t=this.index;if(this.advance(),!Ct(this.peek))return this.error("Invalid character [#]",-1);for(;kt(this.peek);)this.advance();let e=this.input.substring(t,this.index);return fe(t,this.index,e)}scanNumber(t){let e=this.index===t,s=!1;for(this.advance();;){if(!T(this.peek))if(this.peek===95){if(!T(this.input.charCodeAt(this.index-1))||!T(this.input.charCodeAt(this.index+1)))return this.error("Invalid numeric separator",0);s=!0}else if(this.peek===46)e=!1;else if(we(this.peek)){if(this.advance(),Se(this.peek)&&this.advance(),!T(this.peek))return this.error("Invalid exponent",-1);e=!1}else break;this.advance()}let i=this.input.substring(t,this.index);s&&(i=i.replace(/_/g,""));let r=e?ke(i):parseFloat(i);return ye(t,this.index,r)}scanString(){let t=this.index,e=this.peek;this.advance();let s="",i=this.index,r=this.input;for(;this.peek!=e;)if(this.peek==92){s+=r.substring(i,this.index);let h;if(this.advance(),this.peek==117){let c=r.substring(this.index+1,this.index+5);if(/^[0-9a-f]+$/i.test(c))h=parseInt(c,16);else return this.error(`Invalid unicode escape [\\u${c}]`,0);for(let p=0;p<5;p++)this.advance()}else h=Ce(this.peek),this.advance();s+=String.fromCharCode(h),i=this.index}else{if(this.peek==0)return this.error("Unterminated quote",0);this.advance()}let a=r.substring(i,this.index);return this.advance(),ve(t,this.index,s+a)}scanQuestion(t){this.advance();let e="?";return(this.peek===63||this.peek===46)&&(e+=this.peek===46?".":"?",this.advance()),Y(t,this.index,e)}error(t,e){let s=this.index+e;return ge(s,this.index,`Lexer Error: ${t} at column ${s} in expression [${this.input}]`)}};n(Ct,"me");n(kt,"Se");n(we,"Bs");n(Se,"Ts");n(Ce,"Ms");n(ke,"_s");Pe=[/@/,/^\s*$/,/[<>]/,/^[{}]$/,/&(#|[a-z])/i,/^\/\//];n(Oe,"Ee");Ee=class Jt{static{n(this,"r")}static fromArray(e){return e?(Oe("interpolation",e),new Jt(e[0],e[1])):$}constructor(e,s){this.start=e,this.end=s}},$=new Ee("{{","}}"),Ie=class{static{n(this,"zt")}constructor(t,e,s){this.strings=t,this.expressions=e,this.offsets=s}},be=class{static{n(this,"qt")}constructor(t,e,s){this.templateBindings=t,this.warnings=e,this.errors=s}},Qt=class{static{n(this,"mt")}constructor(t){this._lexer=t,this.errors=[]}parseAction(t,e,s,i=$){this._checkNoInterpolation(t,e,i);let r=this._stripComments(t),a=this._lexer.tokenize(r),h=new U(t,e,s,a,1,this.errors,0).parseChain();return new _(h,t,e,s,this.errors)}parseBinding(t,e,s,i=$){let r=this._parseBindingAst(t,e,s,i);return new _(r,t,e,s,this.errors)}checkSimpleExpression(t){let e=new Ae;return t.visit(e),e.errors}parseSimpleBinding(t,e,s,i=$){let r=this._parseBindingAst(t,e,s,i),a=this.checkSimpleExpression(r);return a.length>0&&this._reportError(`Host binding expression cannot contain ${a.join(" ")}`,t,e),new _(r,t,e,s,this.errors)}_reportError(t,e,s,i){this.errors.push(new st(t,e,s,i))}_parseBindingAst(t,e,s,i){this._checkNoInterpolation(t,e,i);let r=this._stripComments(t),a=this._lexer.tokenize(r);return new U(t,e,s,a,0,this.errors,0).parseChain()}parseTemplateBindings(t,e,s,i,r){let a=this._lexer.tokenize(e);return new U(e,s,r,a,0,this.errors,0).parseTemplateBindings({source:t,span:new L(i,i+t.length)})}parseInterpolation(t,e,s,i,r=$){let{strings:a,expressions:h,offsets:c}=this.splitInterpolation(t,e,i,r);if(h.length===0)return null;let p=[];for(let f=0;f<h.length;++f){let y=h[f].text,g=this._stripComments(y),P=this._lexer.tokenize(g),w=new U(t,e,s,P,0,this.errors,c[f]).parseChain();p.push(w)}return this.createInterpolationAst(a.map(f=>f.text),p,t,e,s)}parseInterpolationExpression(t,e,s){let i=this._stripComments(t),r=this._lexer.tokenize(i),a=new U(t,e,s,r,0,this.errors,0).parseChain(),h=["",""];return this.createInterpolationAst(h,[a],t,e,s)}createInterpolationAst(t,e,s,i,r){let a=new F(0,s.length),h=new jt(a,a.toAbsolute(r),t,e);return new _(h,s,i,r,this.errors)}splitInterpolation(t,e,s,i=$){let r=[],a=[],h=[],c=s?Ne(s):null,p=0,f=!1,y=!1,{start:g,end:P}=i;for(;p<t.length;)if(f){let w=p,K=w+g.length,N=this._getInterpolationEndIndex(t,P,K);if(N===-1){f=!1,y=!0;break}let q=N+P.length,xt=t.substring(K,N);xt.trim().length===0&&this._reportError("Blank expressions are not allowed in interpolated strings",t,`at column ${p} in`,e),a.push({text:xt,start:w,end:q});let re=(c?.get(w)??w)+g.length;h.push(re),p=q,f=!1}else{let w=p;p=t.indexOf(g,p),p===-1&&(p=t.length);let K=t.substring(w,p);r.push({text:K,start:w,end:p}),f=!0}if(!f)if(y){let w=r[r.length-1];w.text+=t.substring(p),w.end=t.length}else r.push({text:t.substring(p),start:p,end:t.length});return new Ie(r,a,h)}wrapLiteralPrimitive(t,e,s){let i=new F(0,t==null?0:t.length);return new _(new E(i,i.toAbsolute(s),t),t,e,s,this.errors)}_stripComments(t){let e=this._commentStart(t);return e!=null?t.substring(0,e):t}_commentStart(t){let e=null;for(let s=0;s<t.length-1;s++){let i=t.charCodeAt(s),r=t.charCodeAt(s+1);if(i===47&&r==47&&e==null)return s;e===i?e=null:e==null&&wt(i)&&(e=i)}return null}_checkNoInterpolation(t,e,{start:s,end:i}){let r=-1,a=-1;for(let h of this._forEachUnquotedChar(t,0))if(r===-1)t.startsWith(s)&&(r=h);else if(a=this._getInterpolationEndIndex(t,i,h),a>-1)break;r>-1&&a>-1&&this._reportError(`Got interpolation (${s}${i}) where expression was expected`,t,`at column ${r} in`,e)}_getInterpolationEndIndex(t,e,s){for(let i of this._forEachUnquotedChar(t,s)){if(t.startsWith(e,i))return i;if(t.startsWith("//",i))return t.indexOf(e,i)}return-1}*_forEachUnquotedChar(t,e){let s=null,i=0;for(let r=e;r<t.length;r++){let a=t[r];wt(t.charCodeAt(r))&&(s===null||s===a)&&i%2===0?s=s===null?a:null:s===null&&(yield r),i=a==="\\"?i+1:0}}};(function(t){t[t.None=0]="None",t[t.Writable=1]="Writable"})(M||(M={}));U=class{static{n(this,"z")}constructor(t,e,s,i,r,a,h){this.input=t,this.location=e,this.absoluteOffset=s,this.tokens=i,this.parseFlags=r,this.errors=a,this.offset=h,this.rparensExpected=0,this.rbracketsExpected=0,this.rbracesExpected=0,this.context=M.None,this.sourceSpanCache=new Map,this.index=0}peek(t){let e=this.index+t;return e<this.tokens.length?this.tokens[e]:Z}get next(){return this.peek(0)}get atEOF(){return this.index>=this.tokens.length}get inputIndex(){return this.atEOF?this.currentEndIndex:this.next.index+this.offset}get currentEndIndex(){return this.index>0?this.peek(-1).end+this.offset:this.tokens.length===0?this.input.length+this.offset:this.next.index+this.offset}get currentAbsoluteOffset(){return this.absoluteOffset+this.inputIndex}span(t,e){let s=this.currentEndIndex;if(e!==void 0&&e>this.currentEndIndex&&(s=e),t>s){let i=s;s=t,t=i}return new F(t,s)}sourceSpan(t,e){let s=`${t}@${this.inputIndex}:${e}`;return this.sourceSpanCache.has(s)||this.sourceSpanCache.set(s,this.span(t,e).toAbsolute(this.absoluteOffset)),this.sourceSpanCache.get(s)}advance(){this.index++}withContext(t,e){this.context|=t;let s=e();return this.context^=t,s}consumeOptionalCharacter(t){return this.next.isCharacter(t)?(this.advance(),!0):!1}peekKeywordLet(){return this.next.isKeywordLet()}peekKeywordAs(){return this.next.isKeywordAs()}expectCharacter(t){this.consumeOptionalCharacter(t)||this.error(`Missing expected ${String.fromCharCode(t)}`)}consumeOptionalOperator(t){return this.next.isOperator(t)?(this.advance(),!0):!1}expectOperator(t){this.consumeOptionalOperator(t)||this.error(`Missing expected operator ${t}`)}prettyPrintToken(t){return t===Z?"end of input":`token ${t}`}expectIdentifierOrKeyword(){let t=this.next;return!t.isIdentifier()&&!t.isKeyword()?(t.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(t,"expected identifier or keyword"):this.error(`Unexpected ${this.prettyPrintToken(t)}, expected identifier or keyword`),null):(this.advance(),t.toString())}expectIdentifierOrKeywordOrString(){let t=this.next;return!t.isIdentifier()&&!t.isKeyword()&&!t.isString()?(t.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(t,"expected identifier, keyword or string"):this.error(`Unexpected ${this.prettyPrintToken(t)}, expected identifier, keyword, or string`),""):(this.advance(),t.toString())}parseChain(){let t=[],e=this.inputIndex;for(;this.index<this.tokens.length;){let s=this.parsePipe();if(t.push(s),this.consumeOptionalCharacter(59))for(this.parseFlags&1||this.error("Binding expression cannot contain chained expression");this.consumeOptionalCharacter(59););else if(this.index<this.tokens.length){let i=this.index;if(this.error(`Unexpected token '${this.next}'`),this.index===i)break}}if(t.length===0){let s=this.offset,i=this.offset+this.input.length;return new O(this.span(s,i),this.sourceSpan(s,i))}return t.length==1?t[0]:new Mt(this.span(e),this.sourceSpan(e),t)}parsePipe(){let t=this.inputIndex,e=this.parseExpression();if(this.consumeOptionalOperator("|")){this.parseFlags&1&&this.error("Cannot have a pipe in an action expression");do{let s=this.inputIndex,i=this.expectIdentifierOrKeyword(),r,a;i!==null?r=this.sourceSpan(s):(i="",a=this.next.index!==-1?this.next.index:this.input.length+this.offset,r=new F(a,a).toAbsolute(this.absoluteOffset));let h=[];for(;this.consumeOptionalCharacter(58);)h.push(this.parseExpression());e=new Gt(this.span(t),this.sourceSpan(t,a),e,i,h,r)}while(this.consumeOptionalOperator("|"))}return e}parseExpression(){return this.parseConditional()}parseConditional(){let t=this.inputIndex,e=this.parseLogicalOr();if(this.consumeOptionalOperator("?")){let s=this.parsePipe(),i;if(this.consumeOptionalCharacter(58))i=this.parsePipe();else{let r=this.inputIndex,a=this.input.substring(t,r);this.error(`Conditional expression ${a} requires all 3 expressions`),i=new O(this.span(t),this.sourceSpan(t))}return new Bt(this.span(t),this.sourceSpan(t),e,s,i)}else return e}parseLogicalOr(){let t=this.inputIndex,e=this.parseLogicalAnd();for(;this.consumeOptionalOperator("||");){let s=this.parseLogicalAnd();e=new I(this.span(t),this.sourceSpan(t),"||",e,s)}return e}parseLogicalAnd(){let t=this.inputIndex,e=this.parseNullishCoalescing();for(;this.consumeOptionalOperator("&&");){let s=this.parseNullishCoalescing();e=new I(this.span(t),this.sourceSpan(t),"&&",e,s)}return e}parseNullishCoalescing(){let t=this.inputIndex,e=this.parseEquality();for(;this.consumeOptionalOperator("??");){let s=this.parseEquality();e=new I(this.span(t),this.sourceSpan(t),"??",e,s)}return e}parseEquality(){let t=this.inputIndex,e=this.parseRelational();for(;this.next.type==u.Operator;){let s=this.next.strValue;switch(s){case"==":case"===":case"!=":case"!==":this.advance();let i=this.parseRelational();e=new I(this.span(t),this.sourceSpan(t),s,e,i);continue}break}return e}parseRelational(){let t=this.inputIndex,e=this.parseAdditive();for(;this.next.type==u.Operator;){let s=this.next.strValue;switch(s){case"<":case">":case"<=":case">=":this.advance();let i=this.parseAdditive();e=new I(this.span(t),this.sourceSpan(t),s,e,i);continue}break}return e}parseAdditive(){let t=this.inputIndex,e=this.parseMultiplicative();for(;this.next.type==u.Operator;){let s=this.next.strValue;switch(s){case"+":case"-":this.advance();let i=this.parseMultiplicative();e=new I(this.span(t),this.sourceSpan(t),s,e,i);continue}break}return e}parseMultiplicative(){let t=this.inputIndex,e=this.parsePrefix();for(;this.next.type==u.Operator;){let s=this.next.strValue;switch(s){case"*":case"%":case"/":this.advance();let i=this.parsePrefix();e=new I(this.span(t),this.sourceSpan(t),s,e,i);continue}break}return e}parsePrefix(){if(this.next.type==u.Operator){let t=this.inputIndex,e=this.next.strValue,s;switch(e){case"+":return this.advance(),s=this.parsePrefix(),at.createPlus(this.span(t),this.sourceSpan(t),s);case"-":return this.advance(),s=this.parsePrefix(),at.createMinus(this.span(t),this.sourceSpan(t),s);case"!":return this.advance(),s=this.parsePrefix(),new qt(this.span(t),this.sourceSpan(t),s)}}return this.parseCallChain()}parseCallChain(){let t=this.inputIndex,e=this.parsePrimary();for(;;)if(this.consumeOptionalCharacter(46))e=this.parseAccessMember(e,t,!1);else if(this.consumeOptionalOperator("?."))this.consumeOptionalCharacter(40)?e=this.parseCall(e,t,!0):e=this.consumeOptionalCharacter(91)?this.parseKeyedReadOrWrite(e,t,!0):this.parseAccessMember(e,t,!0);else if(this.consumeOptionalCharacter(91))e=this.parseKeyedReadOrWrite(e,t,!1);else if(this.consumeOptionalCharacter(40))e=this.parseCall(e,t,!1);else if(this.consumeOptionalOperator("!"))e=new zt(this.span(t),this.sourceSpan(t),e);else return e}parsePrimary(){let t=this.inputIndex;if(this.consumeOptionalCharacter(40)){this.rparensExpected++;let e=this.parsePipe();return this.rparensExpected--,this.expectCharacter(41),e}else{if(this.next.isKeywordNull())return this.advance(),new E(this.span(t),this.sourceSpan(t),null);if(this.next.isKeywordUndefined())return this.advance(),new E(this.span(t),this.sourceSpan(t),void 0);if(this.next.isKeywordTrue())return this.advance(),new E(this.span(t),this.sourceSpan(t),!0);if(this.next.isKeywordFalse())return this.advance(),new E(this.span(t),this.sourceSpan(t),!1);if(this.next.isKeywordThis())return this.advance(),new he(this.span(t),this.sourceSpan(t));if(this.consumeOptionalCharacter(91)){this.rbracketsExpected++;let e=this.parseExpressionList(93);return this.rbracketsExpected--,this.expectCharacter(93),new Vt(this.span(t),this.sourceSpan(t),e)}else{if(this.next.isCharacter(123))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMember(new H(this.span(t),this.sourceSpan(t)),t,!1);if(this.next.isNumber()){let e=this.next.toNumber();return this.advance(),new E(this.span(t),this.sourceSpan(t),e)}else if(this.next.isString()){let e=this.next.toString();return this.advance(),new E(this.span(t),this.sourceSpan(t),e)}else return this.next.isPrivateIdentifier()?(this._reportErrorForPrivateIdentifier(this.next,null),new O(this.span(t),this.sourceSpan(t))):this.index>=this.tokens.length?(this.error(`Unexpected end of expression: ${this.input}`),new O(this.span(t),this.sourceSpan(t))):(this.error(`Unexpected token ${this.next}`),new O(this.span(t),this.sourceSpan(t)))}}}parseExpressionList(t){let e=[];do if(!this.next.isCharacter(t))e.push(this.parsePipe());else break;while(this.consumeOptionalCharacter(44));return e}parseLiteralMap(){let t=[],e=[],s=this.inputIndex;if(this.expectCharacter(123),!this.consumeOptionalCharacter(125)){this.rbracesExpected++;do{let i=this.inputIndex,r=this.next.isString(),a=this.expectIdentifierOrKeywordOrString();if(t.push({key:a,quoted:r}),r)this.expectCharacter(58),e.push(this.parsePipe());else if(this.consumeOptionalCharacter(58))e.push(this.parsePipe());else{let h=this.span(i),c=this.sourceSpan(i);e.push(new it(h,c,c,new H(h,c),a))}}while(this.consumeOptionalCharacter(44)&&!this.next.isCharacter(125));this.rbracesExpected--,this.expectCharacter(125)}return new Ft(this.span(s),this.sourceSpan(s),t,e)}parseAccessMember(t,e,s){let i=this.inputIndex,r=this.withContext(M.Writable,()=>{let c=this.expectIdentifierOrKeyword()??"";return c.length===0&&this.error("Expected identifier for property access",t.span.end),c}),a=this.sourceSpan(i),h;if(s)this.consumeOptionalOperator("=")?(this.error("The '?.' operator cannot be used in the assignment"),h=new O(this.span(e),this.sourceSpan(e))):h=new rt(this.span(e),this.sourceSpan(e),a,t,r);else if(this.consumeOptionalOperator("=")){if(!(this.parseFlags&1))return this.error("Bindings cannot contain assignments"),new O(this.span(e),this.sourceSpan(e));let c=this.parseConditional();h=new Wt(this.span(e),this.sourceSpan(e),a,t,r,c)}else h=new it(this.span(e),this.sourceSpan(e),a,t,r);return h}parseCall(t,e,s){let i=this.inputIndex;this.rparensExpected++;let r=this.parseCallArguments(),a=this.span(i,this.inputIndex).toAbsolute(this.absoluteOffset);this.expectCharacter(41),this.rparensExpected--;let h=this.span(e),c=this.sourceSpan(e);return s?new ot(h,c,t,r,a):new Dt(h,c,t,r,a)}parseCallArguments(){if(this.next.isCharacter(41))return[];let t=[];do t.push(this.parsePipe());while(this.consumeOptionalCharacter(44));return t}expectTemplateBindingKey(){let t="",e=!1,s=this.currentAbsoluteOffset;do t+=this.expectIdentifierOrKeywordOrString(),e=this.consumeOptionalOperator("-"),e&&(t+="-");while(e);return{source:t,span:new L(s,s+t.length)}}parseTemplateBindings(t){let e=[];for(e.push(...this.parseDirectiveKeywordBindings(t));this.index<this.tokens.length;){let s=this.parseLetBinding();if(s)e.push(s);else{let i=this.expectTemplateBindingKey(),r=this.parseAsBinding(i);r?e.push(r):(i.source=t.source+i.source.charAt(0).toUpperCase()+i.source.substring(1),e.push(...this.parseDirectiveKeywordBindings(i)))}this.consumeStatementTerminator()}return new be(e,[],this.errors)}parseKeyedReadOrWrite(t,e,s){return this.withContext(M.Writable,()=>{this.rbracketsExpected++;let i=this.parsePipe();if(i instanceof O&&this.error("Key access cannot be empty"),this.rbracketsExpected--,this.expectCharacter(93),this.consumeOptionalOperator("="))if(s)this.error("The '?.' operator cannot be used in the assignment");else{let r=this.parseConditional();return new Rt(this.span(e),this.sourceSpan(e),t,i,r)}else return s?new nt(this.span(e),this.sourceSpan(e),t,i):new Ut(this.span(e),this.sourceSpan(e),t,i);return new O(this.span(e),this.sourceSpan(e))})}parseDirectiveKeywordBindings(t){let e=[];this.consumeOptionalCharacter(58);let s=this.getDirectiveBoundTarget(),i=this.currentAbsoluteOffset,r=this.parseAsBinding(t);r||(this.consumeStatementTerminator(),i=this.currentAbsoluteOffset);let a=new L(t.span.start,i);return e.push(new Ht(a,t,s)),r&&e.push(r),e}getDirectiveBoundTarget(){if(this.next===Z||this.peekKeywordAs()||this.peekKeywordLet())return null;let t=this.parsePipe(),{start:e,end:s}=t.span,i=this.input.substring(e,s);return new _(t,i,this.location,this.absoluteOffset+e,this.errors)}parseAsBinding(t){if(!this.peekKeywordAs())return null;this.advance();let e=this.expectTemplateBindingKey();this.consumeStatementTerminator();let s=new L(t.span.start,this.currentAbsoluteOffset);return new lt(s,e,t)}parseLetBinding(){if(!this.peekKeywordLet())return null;let t=this.currentAbsoluteOffset;this.advance();let e=this.expectTemplateBindingKey(),s=null;this.consumeOptionalOperator("=")&&(s=this.expectTemplateBindingKey()),this.consumeStatementTerminator();let i=new L(t,this.currentAbsoluteOffset);return new lt(i,e,s)}consumeStatementTerminator(){this.consumeOptionalCharacter(59)||this.consumeOptionalCharacter(44)}error(t,e=null){this.errors.push(new st(t,this.input,this.locationText(e),this.location)),this.skip()}locationText(t=null){return t==null&&(t=this.index),t<this.tokens.length?`at column ${this.tokens[t].index+1} in`:"at the end of the expression"}_reportErrorForPrivateIdentifier(t,e){let s=`Private identifiers are not supported. Unexpected private identifier: ${t}`;e!==null&&(s+=`, ${e}`),this.error(s)}skip(){let t=this.next;for(;this.index<this.tokens.length&&!t.isCharacter(59)&&!t.isOperator("|")&&(this.rparensExpected<=0||!t.isCharacter(41))&&(this.rbracesExpected<=0||!t.isCharacter(125))&&(this.rbracketsExpected<=0||!t.isCharacter(93))&&(!(this.context&M.Writable)||!t.isOperator("="));)this.next.isError()&&this.errors.push(new st(this.next.toString(),this.input,this.locationText(),this.location)),this.advance(),t=this.next}},Ae=class extends oe{static{n(this,"Ht")}constructor(){super(...arguments),this.errors=[]}visitPipe(){this.errors.push("pipes")}};n(Ne,"Fs");n(Pt,"Ce");n(Ke,"Ws");n(Te,"Gs");n(Le,"Ae");n(Yt,"Oe");n(_e,"Ie");n($e,"ke");n(Me,"Ne");n(ct,"Ct");Be=n(t=>Qt.prototype._commentStart(t),"Vs");n(We,"Qs");n(j,"At");Ue=j((t,e)=>e.parseBinding(t,"",0)),ns=j((t,e)=>e.parseSimpleBinding(t,"",0)),Re=j((t,e)=>e.parseAction(t,"",0)),Ge=j((t,e)=>e.parseInterpolationExpression(t,"",0)),Ve=j((t,e)=>e.parseTemplateBindings("",t,"",0,0),!1),Fe=n((t,e,s)=>{if(!(t&&e==null))return Array.isArray(e)||typeof e=="string"?e[s<0?e.length+s:s]:e.at(s)},"Hs"),Zt=Fe,je=class{static{n(this,"jt")}text;constructor(t){this.text=t}getCharacterIndex(t,e){return $e(this.text,t,e)}getCharacterLastIndex(t,e){return _e(this.text,t,e)}transformSpan(t,{stripSpaces:e=!1,hasParentParens:s=!1}={}){if(!e)return ct(t);let{outerSpan:i,innerSpan:r,hasParens:a}=Le(t,this.text,s),h=ct(r);return a&&(h.extra={parenthesized:!0,parenStart:i.start,parenEnd:i.end}),h}createNode(t,{stripSpaces:e=!0,hasParentParens:s=!1}={}){let{type:i,start:r,end:a}=t,h={...t,...this.transformSpan({start:r,end:a},{stripSpaces:e,hasParentParens:s})};switch(i){case"NumericLiteral":case"StringLiteral":{let c=this.text.slice(h.start,h.end),{value:p}=h;h.extra={...h.extra,raw:c,rawValue:p};break}case"ObjectProperty":{let{shorthand:c}=h;c&&(h.extra={...h.extra,shorthand:c});break}}return h}},qe=je;n(dt,"Zt");n(C,"k");n(k,"N");n(Ot,"Be");n(Et,"Te");Xt=class extends qe{static{n(this,"It")}constructor(t,e){super(e),W(this,l),W(this,z),W(this,G),D(this,z,t),D(this,G,e)}get node(){return o(this,l,v).call(this,b(this,z))}transformNode(t){return o(this,l,pt).call(this,t)}};z=new WeakMap,G=new WeakMap,l=new WeakSet,d=n(function(t,{stripSpaces:e=!0,hasParentParens:s=!1}={}){return this.createNode(t,{stripSpaces:e,hasParentParens:s})},"d"),R=n(function(t,e,{computed:s,optional:i,end:r=k(e),hasParentParens:a=!1}){if(Et(t,b(this,G))||t.sourceSpan.start===e.start)return e;let h=o(this,l,v).call(this,t),c=Ot(h);return o(this,l,d).call(this,{type:i||c?"OptionalMemberExpression":"MemberExpression",object:h,property:e,computed:s,...i?{optional:!0}:c?{optional:!1}:void 0,start:C(h),end:r},{hasParentParens:a})},"Ot"),v=n(function(t,e=!1){return o(this,l,pt).call(this,t,e)},"v"),pt=n(function(t,e=!1){if(t instanceof jt){let{expressions:s}=t;if(s.length!==1)throw new Error("Unexpected 'Interpolation'");return o(this,l,v).call(this,s[0])}if(t instanceof at)return o(this,l,d).call(this,{type:"UnaryExpression",prefix:!0,argument:o(this,l,v).call(this,t.expr),operator:t.operator,...t.sourceSpan},{hasParentParens:e});if(t instanceof I){let{left:s,operation:i,right:r}=t,a=o(this,l,v).call(this,s),h=o(this,l,v).call(this,r),c=C(a),p=k(h),f={left:a,right:h,start:c,end:p};return i==="&&"||i==="||"||i==="??"?o(this,l,d).call(this,{...f,type:"LogicalExpression",operator:i},{hasParentParens:e}):o(this,l,d).call(this,{...f,type:"BinaryExpression",operator:i},{hasParentParens:e})}if(t instanceof Gt){let{exp:s,name:i,args:r}=t,a=o(this,l,v).call(this,s),h=C(a),c=k(a),p=this.getCharacterIndex(/\S/,this.getCharacterIndex("|",c)+1),f=o(this,l,d).call(this,{type:"Identifier",name:i,start:p,end:p+i.length}),y=r.map(g=>o(this,l,v).call(this,g));return o(this,l,d).call(this,{type:"NGPipeExpression",left:a,right:f,arguments:y,start:h,end:k(y.length===0?f:Zt(!1,y,-1))},{hasParentParens:e})}if(t instanceof Mt)return o(this,l,d).call(this,{type:"NGChainedExpression",expressions:t.expressions.map(s=>o(this,l,v).call(this,s)),...t.sourceSpan},{hasParentParens:e});if(t instanceof Bt){let{condition:s,trueExp:i,falseExp:r}=t,a=o(this,l,v).call(this,s),h=o(this,l,v).call(this,i),c=o(this,l,v).call(this,r);return o(this,l,d).call(this,{type:"ConditionalExpression",test:a,consequent:h,alternate:c,start:C(a),end:k(c)},{hasParentParens:e})}if(t instanceof O)return o(this,l,d).call(this,{type:"NGEmptyExpression",...t.sourceSpan},{hasParentParens:e});if(t instanceof H)return o(this,l,d).call(this,{type:"ThisExpression",...t.sourceSpan},{hasParentParens:e});if(t instanceof Ut||t instanceof nt)return o(this,l,R).call(this,t.receiver,o(this,l,v).call(this,t.key),{computed:!0,optional:t instanceof nt,end:t.sourceSpan.end,hasParentParens:e});if(t instanceof Vt)return o(this,l,d).call(this,{type:"ArrayExpression",elements:t.expressions.map(s=>o(this,l,v).call(this,s)),...t.sourceSpan},{hasParentParens:e});if(t instanceof Ft){let{keys:s,values:i}=t,r=i.map(h=>o(this,l,v).call(this,h)),a=s.map(({key:h,quoted:c},p)=>{let f=r[p],y=C(f),g=k(f),P=this.getCharacterIndex(/\S/,p===0?t.sourceSpan.start+1:this.getCharacterIndex(",",k(r[p-1]))+1),w=y===P?g:this.getCharacterLastIndex(/\S/,this.getCharacterLastIndex(":",y-1)-1)+1,K={start:P,end:w},N=c?o(this,l,d).call(this,{type:"StringLiteral",value:h,...K}):o(this,l,d).call(this,{type:"Identifier",name:h,...K}),q=N.end<N.start||P===y;return o(this,l,d).call(this,{type:"ObjectProperty",key:N,value:f,shorthand:q,computed:!1,start:C(N),end:g})});return o(this,l,d).call(this,{type:"ObjectExpression",properties:a,...t.sourceSpan},{hasParentParens:e})}if(t instanceof E){let{value:s}=t;switch(typeof s){case"boolean":return o(this,l,d).call(this,{type:"BooleanLiteral",value:s,...t.sourceSpan},{hasParentParens:e});case"number":return o(this,l,d).call(this,{type:"NumericLiteral",value:s,...t.sourceSpan},{hasParentParens:e});case"object":return o(this,l,d).call(this,{type:"NullLiteral",...t.sourceSpan},{hasParentParens:e});case"string":return o(this,l,d).call(this,{type:"StringLiteral",value:s,...t.sourceSpan},{hasParentParens:e});case"undefined":return o(this,l,d).call(this,{type:"Identifier",name:"undefined",...t.sourceSpan},{hasParentParens:e});default:throw new Error(`Unexpected LiteralPrimitive value type ${typeof s}`)}}if(t instanceof Dt||t instanceof ot){let s=t instanceof ot,{receiver:i,args:r}=t,a=r.length===1?[o(this,l,v).call(this,r[0],!0)]:r.map(f=>o(this,l,v).call(this,f)),h=o(this,l,v).call(this,i),c=Ot(h),p=s||c?"OptionalCallExpression":"CallExpression";return o(this,l,d).call(this,{type:p,callee:h,arguments:a,optional:p==="OptionalCallExpression"?s:void 0,start:C(h),end:t.sourceSpan.end},{hasParentParens:e})}if(t instanceof zt){let s=o(this,l,v).call(this,t.expression);return o(this,l,d).call(this,{type:"TSNonNullExpression",expression:s,start:C(s),end:t.sourceSpan.end},{hasParentParens:e})}if(t instanceof qt){let s=o(this,l,v).call(this,t.expression);return o(this,l,d).call(this,{type:"UnaryExpression",prefix:!0,operator:"!",argument:s,start:t.sourceSpan.start,end:k(s)},{hasParentParens:e})}if(t instanceof it||t instanceof rt){let{receiver:s,name:i}=t,r=this.getCharacterLastIndex(/\S/,t.sourceSpan.end-1)+1,a=o(this,l,d).call(this,{type:"Identifier",name:i,start:r-i.length,end:r},Et(s,b(this,G))?{hasParentParens:e}:{});return o(this,l,R).call(this,s,a,{computed:!1,optional:t instanceof rt,hasParentParens:e})}if(t instanceof Rt){let s=o(this,l,v).call(this,t.key),i=o(this,l,v).call(this,t.value),r=o(this,l,R).call(this,t.receiver,s,{computed:!0,optional:!1,end:this.getCharacterIndex("]",k(s))+1});return o(this,l,d).call(this,{type:"AssignmentExpression",left:r,operator:"=",right:i,start:C(r),end:k(i)},{hasParentParens:e})}if(t instanceof Wt){let{receiver:s,name:i,value:r}=t,a=o(this,l,v).call(this,r),h=this.getCharacterLastIndex(/\S/,this.getCharacterLastIndex("=",C(a)-1)-1)+1,c=o(this,l,d).call(this,{type:"Identifier",name:i,start:h-i.length,end:h}),p=o(this,l,R).call(this,s,c,{computed:!1,optional:!1});return o(this,l,d).call(this,{type:"AssignmentExpression",left:p,operator:"=",right:a,start:C(p),end:k(a)},{hasParentParens:e})}throw Object.assign(new Error("Unexpected node"),{node:t})},"Yt");n(ze,"Me");n(It,"_e");n(bt,"Ue");De=class extends Xt{static{n(this,"Jt")}constructor(t,e){super(void 0,e),W(this,x),W(this,V),W(this,B),D(this,V,t),D(this,B,e);for(let s of t)o(this,x,te).call(this,s)}get expressions(){return o(this,x,ee).call(this)}};V=new WeakMap,B=new WeakMap,x=new WeakSet,At=n(function(){return b(this,V)[0].key},"Fe"),S=n(function(t,{stripSpaces:e=!0}={}){return this.createNode(t,{stripSpaces:e})},"C"),X=n(function(t){return this.transformNode(t)},"Xt"),tt=n(function(t){return Me(t.slice(b(this,x,At).source.length))},"te"),et=n(function(t){let e=b(this,B);if(e[t.start]!=='"'&&e[t.start]!=="'")return;let s=e[t.start],i=!1;for(let r=t.start+1;r<e.length;r++)switch(e[r]){case s:if(!i){t.end=r+1;return}default:i=!1;break;case"\\":i=!i;break}},"ee"),te=n(function(t){o(this,x,et).call(this,t.key.span),bt(t)&&t.value&&o(this,x,et).call(this,t.value.span)},"De"),Nt=n(function(t){if(!t.value||t.value.source)return t.value;let e=this.getCharacterIndex(/\S/,t.sourceSpan.start);return{source:"$implicit",span:{start:e,end:e}}},"We"),ee=n(function(){let t=b(this,V),[e]=t,s=b(this,B).slice(e.sourceSpan.start,e.sourceSpan.end).trim().length===0?t.slice(1):t,i=[],r=null;for(let[a,h]of s.entries()){if(r&&It(r)&&bt(h)&&h.value&&h.value.source===r.key.source){let c=o(this,x,S).call(this,{type:"NGMicrosyntaxKey",name:h.key.source,...h.key.span}),p=n((g,P)=>({...g,...this.transformSpan({start:g.start,end:P})}),"f"),f=n(g=>({...p(g,c.end),alias:c}),"S"),y=i.pop();if(y.type==="NGMicrosyntaxExpression")i.push(f(y));else if(y.type==="NGMicrosyntaxKeyedExpression"){let g=f(y.expression);i.push(p({...y,expression:g},g.end))}else throw new Error(`Unexpected type ${y.type}`)}else i.push(o(this,x,Kt).call(this,h,a));r=h}return o(this,x,S).call(this,{type:"NGMicrosyntax",body:i,...i.length===0?t[0].sourceSpan:{start:i[0].start,end:Zt(!1,i,-1).end}})},"Ge"),Kt=n(function(t,e){if(It(t)){let{key:s,value:i}=t;return i?e===0?o(this,x,S).call(this,{type:"NGMicrosyntaxExpression",expression:o(this,x,X).call(this,i.ast),alias:null,...i.sourceSpan}):o(this,x,S).call(this,{type:"NGMicrosyntaxKeyedExpression",key:o(this,x,S).call(this,{type:"NGMicrosyntaxKey",name:o(this,x,tt).call(this,s.source),...s.span}),expression:o(this,x,S).call(this,{type:"NGMicrosyntaxExpression",expression:o(this,x,X).call(this,i.ast),alias:null,...i.sourceSpan}),start:s.span.start,end:i.sourceSpan.end}):o(this,x,S).call(this,{type:"NGMicrosyntaxKey",name:o(this,x,tt).call(this,s.source),...s.span})}else{let{key:s,sourceSpan:i}=t;if(/^let\s$/.test(b(this,B).slice(i.start,i.start+4))){let{value:r}=t;return o(this,x,S).call(this,{type:"NGMicrosyntaxLet",key:o(this,x,S).call(this,{type:"NGMicrosyntaxKey",name:s.source,...s.span}),value:r?o(this,x,S).call(this,{type:"NGMicrosyntaxKey",name:r.source,...r.span}):null,start:i.start,end:r?r.span.end:s.span.end})}else{let r=o(this,x,Nt).call(this,t);return o(this,x,S).call(this,{type:"NGMicrosyntaxAs",key:o(this,x,S).call(this,{type:"NGMicrosyntaxKey",name:r.source,...r.span}),alias:o(this,x,S).call(this,{type:"NGMicrosyntaxKey",name:s.source,...s.span}),start:r.span.start,end:s.span.end})}}},"Ve");n(He,"Qe");n(ft,"Mt");n(Je,"ze");Qe=n(t=>ft(Ue(t)),"qe"),Ye=n(t=>ft(Ge(t)),"He"),se=n(t=>ft(Re(t)),"se"),Ze=n(t=>Je(Ve(t)),"je");n(ie,"re");n(Xe,"Ye");n(Q,"_t");ts=Q(se),es=Q(Qe),ss=Q(Ye),is=Q(Ze),as=_t});rs();export{as as default,$t as parsers};
